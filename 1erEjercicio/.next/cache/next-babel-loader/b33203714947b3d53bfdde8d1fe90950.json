{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useContext, useState, useEffect } from 'react';\nimport ArticlesContext from '../components/context/articlesContext';\nimport TagItem from './TagItem';\n\nconst TagsMenu = () => {\n  //estado interno para evaluar si el componente ha sido montado o no para evitar dif entre server render y client render\n  const {\n    0: isMounted,\n    1: setIsMounted\n  } = useState(false);\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n  const {\n    articles\n  } = useContext(ArticlesContext); //Creo un único array con todos los tags de cada artículo\n\n  const singleArray = articles.reduce((data, articulo) => {\n    return data.concat(articulo.taxonomy.tags);\n  }, []); //Creo un objeto donde cada key-value representa un slug y la cantidad de repeticiones\n\n  const group = singleArray.reduce((data, tag) => {\n    data[tag.slug] = data[tag.slug] ? {\n      'cantidad': data[tag.slug].cantidad + 1,\n      'tag': tag\n    } : {\n      'cantidad': 1,\n      'tag': tag\n    };\n    return data;\n  }, {}); //Obtengo los primeros 10 elementos de un array de tags ordenados de mayor a menor segun su cantidad de aparaciones\n\n  const tagsSorted = Object.keys(group).sort(function (a, b) {\n    return group[b].cantidad - group[a].cantidad;\n  }).map(slug => group[slug]).slice(0, 10);\n\n  const renderTags = tags => {\n    return tags.map((item, i) => {\n      return __jsx(TagItem, {\n        key: i,\n        slug: item.tag.slug\n      }, item.tag.text);\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    id: \"\",\n    className: \"cont_tags com-secondary-tag hlp-marginBottom-20\"\n  }, //preguntar si el componente esta montado para renderizar correctamente los tags, sino habia inconsistencias entre server y client\n  isMounted && renderTags(tagsSorted)));\n};\n\nexport default TagsMenu;","map":null,"metadata":{},"sourceType":"module"}