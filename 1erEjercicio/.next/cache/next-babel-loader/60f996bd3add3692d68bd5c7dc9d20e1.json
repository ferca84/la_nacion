{"ast":null,"code":"import React from 'react';\nconst API_URL = `https://api-test-ln.herokuapp.com/articles`;\n\nasync function fetchAPI(url, method, data = null) {\n  const res = await fetch(url, {\n    method: method,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: data\n  });\n  const json = await res.json();\n\n  if (json.errors) {\n    console.error(json.errors);\n    throw new Error('Error en traer datos de la API');\n  }\n\n  return json;\n}\n\nexport async function getArticles() {\n  const data = await fetchAPI(API_URL, 'GET'); //Si no llegara a encontrarse articulos, paso un array vacio para que el resto de la página se renderize\n\n  return data.articles ? data.articles : [];\n}\n/*\r\n\r\n  let expiry = 1 * 60 // 1 minuto por default\r\n  let cacheKey = API_URL;\r\n  if (typeof window !== 'undefined') {\r\n    console.log('we are running on the client')\r\n} else {\r\n    console.log('we are running on the server');\r\n}\r\n  let cached = localStorage.getItem(cacheKey)\r\n  let whenCached = localStorage.getItem(cacheKey + ':ts')\r\n\r\n  if (cached !== null && whenCached !== null) {\r\n    let age = (Date.now() - whenCached) / 1000\r\n    if (age < expiry) {\r\n      let response = new Response(cached)\r\n      return Promise.resolve(response)\r\n    }\r\n\r\n  } else {\r\n    // We need to clean up this old key\r\n    localStorage.removeItem(cacheKey)\r\n    localStorage.removeItem(cacheKey + ':ts')\r\n  }\r\n\r\n    //localStorage.setItem(API_URL, data.articles)\r\n  //localStorage.setItem(API_URL + ':ts', Date.now())\r\n*/","map":{"version":3,"sources":["E:/Web/xampp/htdocs/la_nacion/la_nacion/1erEjercicio/lib/api.js"],"names":["React","API_URL","fetchAPI","url","method","data","res","fetch","headers","body","json","errors","console","error","Error","getArticles","articles"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAI,4CAAjB;;AAEA,eAAeC,QAAf,CAAwBC,GAAxB,EAA6BC,MAA7B,EAAqCC,IAAI,GAAG,IAA5C,EAAkD;AAEhD,QAAMC,GAAG,GAAG,MAAMC,KAAK,CAACJ,GAAD,EAAM;AAC3BC,IAAAA,MAAM,EAAEA,MADmB;AAE3BI,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFkB;AAK3BC,IAAAA,IAAI,EAAEJ;AALqB,GAAN,CAAvB;AAQA,QAAMK,IAAI,GAAG,MAAMJ,GAAG,CAACI,IAAJ,EAAnB;;AACA,MAAIA,IAAI,CAACC,MAAT,EAAiB;AACfC,IAAAA,OAAO,CAACC,KAAR,CAAcH,IAAI,CAACC,MAAnB;AACA,UAAM,IAAIG,KAAJ,CAAU,gCAAV,CAAN;AACD;;AAED,SAAOJ,IAAP;AACD;;AAED,OAAO,eAAeK,WAAf,GAA6B;AAClC,QAAMV,IAAI,GAAG,MAAMH,QAAQ,CAACD,OAAD,EAAU,KAAV,CAA3B,CADkC,CAElC;;AACA,SAAOI,IAAI,CAACW,QAAL,GAAgBX,IAAI,CAACW,QAArB,GAAgC,EAAvC;AACD;AAGD","sourcesContent":["import React from 'react'\r\n\r\nconst API_URL = `https://api-test-ln.herokuapp.com/articles`\r\n\r\nasync function fetchAPI(url, method, data = null) {\r\n\r\n  const res = await fetch(url, {\r\n    method: method,\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: data,\r\n  })\r\n\r\n  const json = await res.json()\r\n  if (json.errors) {\r\n    console.error(json.errors)\r\n    throw new Error('Error en traer datos de la API')\r\n  }\r\n\r\n  return json;\r\n}\r\n\r\nexport async function getArticles() {\r\n  const data = await fetchAPI(API_URL, 'GET');\r\n  //Si no llegara a encontrarse articulos, paso un array vacio para que el resto de la página se renderize\r\n  return data.articles ? data.articles : [];\r\n}\r\n\r\n\r\n/*\r\n\r\n  let expiry = 1 * 60 // 1 minuto por default\r\n  let cacheKey = API_URL;\r\n  if (typeof window !== 'undefined') {\r\n    console.log('we are running on the client')\r\n} else {\r\n    console.log('we are running on the server');\r\n}\r\n  let cached = localStorage.getItem(cacheKey)\r\n  let whenCached = localStorage.getItem(cacheKey + ':ts')\r\n\r\n  if (cached !== null && whenCached !== null) {\r\n    let age = (Date.now() - whenCached) / 1000\r\n    if (age < expiry) {\r\n      let response = new Response(cached)\r\n      return Promise.resolve(response)\r\n    }\r\n\r\n  } else {\r\n    // We need to clean up this old key\r\n    localStorage.removeItem(cacheKey)\r\n    localStorage.removeItem(cacheKey + ':ts')\r\n  }\r\n\r\n    //localStorage.setItem(API_URL, data.articles)\r\n  //localStorage.setItem(API_URL + ':ts', Date.now())\r\n*/"]},"metadata":{},"sourceType":"module"}